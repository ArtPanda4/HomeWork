version: '3.7'

services:
  builder:
    build:
      context: src/
    init: true
    volumes:
      - src:/opt/
    networks:
      - hw

  prod:
    build:
      context: app/ 
    volumes:
      - src:/usr/local/tomcat/webapps
    ports:
      - "8080:8080"
    depends_on:
      - builder  
    networks:
      - hw

networks:
  hw:
    driver: bridge

volumes:
  src: